-- [Çà»ó] Çì¸Ş½º
-- ±×³É ´İ±â 168

-- EVENT ´Â 100¹ø ÀÌ»ó ºÎÅÍ »ç¿ë

-- UID : ¼­¹ö¿¡¼­ Á¦°øÇÏ´Â À¯Àú¹øÈ£
-- EVENT : ¼­¹ö¿¡¼­ Á¦°øÇÏ´Â Äù½ºÆ® ¹øÈ£
-- STEP : ¼­¹ö¿¡¼­ Á¦°øÇÏ´Â Äù½ºÆ® ³»ºÎ ´Ü°è

-- À§ÀÇ ¼¼°¡Áö ÆÄ¶ó¸ŞÅ¸´Â ·ç¾Æ ½ÇÇà½Ã Ç×»ó Àü¿ªº¯¼ö·Î Á¦°ø?

-- Áö¿ªº¯¼ö ¼±¾ğ...
local UserClass;
local QuestNum;
local Ret = 0;
local NPC = 16085;


-- [Çà»ó] Çì¸Ş½º Å¬¸¯½Ã Äù½ºÆ® Ã¼Å©  
--SelectMsg(UID, 4, 429, 8236, NPC, 22, 303, 23, 1004, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1);

if EVENT == 165 then
  QuestNum = SearchQuest(UID, NPC);
		if QuestNum == 0 then --ÇØ´ç NPC¿¡°Ô ÇÒ¼ö ÀÖ´Â Äù½ºÆ®°¡ 0°³ ÀÏ¶§ 
			 SelectMsg(UID, 3, 4130, 4131, NPC, 2013, 520, 2014, 200, 2015, 600, 4130, 850, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1);
			Ret = 1;
		elseif QuestNum > 1 and QuestNum < 100 then--ÇØ´ç NPC¿¡°Ô ÇÒ¼ö ÀÖ´Â Äù½ºÆ®°¡ 1°³ ÀÏ¶§ 
          NpcMsg(UID, 4131, NPC)
      else--ÇØ´ç NPC¿¡°Ô ÇÒ¼ö ÀÖ´Â Äù½ºÆ®°¡ 1°³ ÀÌ»ó ÀÏ¶§ 
          EVENT = QuestNum
		end
end

if EVENT == 850 then
	SelectMsg(UID, 3, -1, 4914, NPC, 4285, -1, 4286, 2013, 4287, 2014, 4420, 2015, 4421, 2016, 4588, 2017, 4589, 2018, 4005, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1);
	else
	end
	

if EVENT == 168 then -- ±×³É ´İ±â 
    Ret = 1;
end

--******************************************************--
-- ¾ÆÀÌµğ º¯°æ ½ÃÀÛ

local savenum = 426
--******************************************************--
if EVENT == 200 then
   ITEM_COUNTA = HowmuchItem(UID, 800032000); -- ¾ÆÀÌµğ º¯°æ ¾ÆÀÌÅÛ 
    if ITEM_COUNTA > 0 then
    ChangeName(UID)
    else
    SelectMsg(UID, 2, savenum, 4454, NPC, 10, 168, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1);
    end
end

--******************************************************--
-- ¾ÆÀÌµğ º¯°æ  ³¡
--******************************************************--

--******************************************************--
-- Å¬·£ ¾ÆÀÌµğ º¯°æ ½ÃÀÛ

local savenum = 450
--******************************************************--
if EVENT == 600 then
   ITEM_COUNTA = HowmuchItem(UID, 800086000); -- Å¬·£ ¾ÆÀÌµğ º¯°æ ¾ÆÀÌÅÛ 
    if ITEM_COUNTA > 0 then
        Chief = CheckChief(UID)
        if Chief == 1 then -- Å¬·£´ÜÀåÀÏ¶§ 
        ChangeClanName(UID)
        else-- Å¬·£´ÜÀå ¾Æ´Ò¶§
        SelectMsg(UID, 2, savenum, 4671, NPC, 10, 168, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1);
        end
    else
    SelectMsg(UID, 2, savenum, 4670, NPC, 10, 168, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1);
    end
end

--******************************************************--
-- Å¬·£ ¾ÆÀÌµğ º¯°æ  ³¡
--******************************************************--


--******************************************************--
-- ÀçºĞ¹è ½ÃÀÛ(°í±Ş)

local savenum = 427
--******************************************************--
if EVENT == 300 then
   ITEM_COUNTA = HowmuchItem(UID, 700001000); -- ¾ÆÀÌµğ º¯°æ ¾ÆÀÌÅÛ 
    if ITEM_COUNTA > 0 then
    SelectMsg(UID, 2, savenum, 4456, NPC, 4189, 301, 4190, 302, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1);
    else
    SelectMsg(UID, 2, savenum, 4455, NPC, 10, 168, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1);
    end
end

local Skill
local Stat

if EVENT == 301 then --½ºÅ³
    Skill = SkillPointFree(UID)
    if Skill == 1 then    
    RobItem(UID, 700001000, 1);
    SelectMsg(UID, 2, savenum, 4473, NPC, 10, 168, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1);   
    else
    Ret = 1;
    end
end

if EVENT == 302 then --´É·ÂÄ¡
    Stat = StatPointFree(UID)
    if Stat == 1 then    
    RobItem(UID, 700001000, 1);
    SelectMsg(UID, 2, savenum, 4474, NPC, 10, 168, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1);
    else
    Ret = 1;
    end
end

--******************************************************--
-- ÀçºĞ¹è ³¡(°í±Ş)
--******************************************************--


--******************************************************--
-- ÀçºĞ¹è ½ÃÀÛ(Áß±Ş)

local savenum = 451
--******************************************************--
if EVENT == 700 then
    Level = CheckLevel(UID)
    if Level > 59 then -- ·¹º§ÀÌ 60ÀÌ»óÀÎ°¡?
    SelectMsg(UID, 2, savenum, 4674, NPC, 10, 168, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1);
    else 
        ITEM_COUNTA = HowmuchItem(UID, 700008000); -- ¾ÆÀÌµğ º¯°æ ¾ÆÀÌÅÛ 
        if ITEM_COUNTA > 0 then
        SelectMsg(UID, 2, savenum, 4673, NPC, 4189, 701, 4190, 702, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1);
        else
        SelectMsg(UID, 2, savenum, 4672, NPC, 10, 168, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1);
        end
    end
end

local Skill
local Stat

if EVENT == 701 then --½ºÅ³
    Skill = SkillPointFree(UID)
    if Skill == 1 then    
    RobItem(UID, 700008000, 1);
    SelectMsg(UID, 2, savenum, 4473, NPC, 10, 168, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1);   
    else
    Ret = 1;
    end
end

if EVENT == 702 then --´É·ÂÄ¡
    Stat = StatPointFree(UID)
    if Stat == 1 then    
    RobItem(UID, 700008000, 1);
    SelectMsg(UID, 2, savenum, 4474, NPC, 10, 168, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1);
    else
    Ret = 1;
    end
end

--******************************************************--
-- ÀçºĞ¹è ³¡(Áß±Ş)
--******************************************************--

--******************************************************--
-- °¡ÀÌµåºÏ ÀÌº¥Æ®  ½ÃÀÛ

local savenum = 428
--******************************************************--
if EVENT == 400 then
    SelectMsg(UID, 2, savenum, 4457, NPC, 4192, 401, 4191, 168, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1);
end

if EVENT == 401 then -- ÀÔ·Â ¹Ú½º 
OpenEditBox(UID, 4459, 402, 403)
end

if EVENT == 402 then --½ÇÆĞ½Ã 
    SelectMsg(UID, 2, savenum, 4460, NPC, 10, 168, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1);
end

if EVENT == 403 then --¼º°ø½Ã 
Serial=CheckPPCardSerial(UID)
    if Serial == 1 then
    Slot = CheckGiveSlot(UID) 
        if Slot > 0 then
        GivePPCardItem(UID)
        else
        SelectMsg(UID, 2, savenum, 4645, NPC, 10, 168, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1);
        end
    else
    SelectMsg(UID, 2, savenum, 4472, NPC, 10, 168, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1);
    end
end

--******************************************************--
-- °¡ÀÌµåºÏ ÀÌº¥Æ®  ³¡
--******************************************************--


--******************************************************--
-- Ä¸Æ¾ ÇÁ¸®¹Ì¾ö  ½ÃÀÛ

local savenum = 429
--******************************************************--
if EVENT == 500 then
    CheckPCBangOwner(UID, 504, 505)
end

if EVENT == 504 then --½ÇÆĞ½Ã 
    SelectMsg(UID, 2, savenum, 4462, NPC, 10, 168, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1);
end

if EVENT == 505 then --¼º°ø½Ã 
    SelectMsg(UID, 3, savenum, 4461, NPC, 4193, 501, 4194, 502, 4195, 503, 4196, 168, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1);
end

if EVENT == 501 then --º¹±Ç
CheckPCBangItem(UID, 379095000, 506, 507)
end

if EVENT == 506 then --½ÇÆĞ½Ã 
    SelectMsg(UID, 2, savenum, 4463, NPC, 10, 168, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1);
end

if EVENT == 507 then --¼º°ø½Ã 
    SelectMsg(UID, 2, savenum, 4466, NPC, 4197, 508, 4199, 168, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1);
end

if EVENT == 508 then --º¹±Ç
    Check = CheckGiveSlot(UID)
    if  Check > 1 then   
    GivePCBangItem(UID,379095000) 
    SelectMsg(UID, 2, savenum, 4468, NPC, 10, 168, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1);
    else
    Ret = 1; 
    end  
end

if EVENT == 502 then --ÀÌº¥Æ® ¾ÆÀÌÅÛ
    CheckPCBangItem(UID, -1, 509, 510)
end

if EVENT == 509 then --½ÇÆĞ½Ã 
    SelectMsg(UID, 2, savenum, 4465, NPC, 10, 168, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1);
end

if EVENT == 510 then --¼º°ø½Ã 
    SelectMsg(UID, 2, savenum, 4467, NPC, 4198, 511, 4199, 168, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1);
end

if EVENT == 511 then --ÀÌº¥Æ® ¾ÆÀÌÅÛ 
    Check = CheckGiveSlot(UID, -1)
    if  Check > 1 then   
    GivePCBangItem(UID,-1)  
    SelectMsg(UID, 2, savenum, 4469, NPC, 10, 168, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1);
    else
    Ret = 1; 
    end  
end

if EVENT == 503 then --³²Àº ¾ÆÀÌÅÛ È®ÀÎ
ShowPCBangItem(UID, 379095000) 
end

--******************************************************--
-- Ä¸Æ¾ ÇÁ¸®¹Ì¾ö ³¡
--******************************************************--

if EVENT == 520 then
	SelectMsg(UID, 3, -1, 1111, NPC, 4285, -1, 4583, 851, 4584, 852, 4585, 853, 4586, 854, 7162, 855, 7163, 856, 4005, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1);
end

if EVENT == 851 then
	SelectMsg(UID, 3, -1, 201311, NPC, 4302, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1);
end

if EVENT == 852 then
	SelectMsg(UID, 3, -1, 201311, NPC, 4302, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1);
end

if EVENT == 853 then
	SelectMsg(UID, 3, -1, 201311, NPC, 4302, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1);
end

if EVENT == 854 then
	SelectMsg(UID, 3, -1, 201311, NPC, 4302, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1);
end

if EVENT == 855 then
	SelectMsg(UID, 3, -1, 201311, NPC, 4302, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1);
end

if EVENT == 856 then
	SelectMsg(UID, 3, -1, 201311, NPC, 4302, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1);
end


if EVENT == 2013 then
	SelectMsg(UID, 3, -1, 201311, NPC, 4288, -1, 4289, -1, 4290, -1, 4291, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1);
end

if EVENT == 2014 then
	SelectMsg(UID, 3, -1, 201311, NPC, 4292, -1, 4293, -1, 4294, -1, 4295, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1);
end

if EVENT == 2015 then
	SelectMsg(UID, 3, -1, 201311, NPC, 4288, -1, 4289, -1, 4290, -1, 4291, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1);
end

if EVENT == 2016 then
	SelectMsg(UID, 3, -1, 201311, NPC, 4292, -1, 4293, -1, 4294, -1, 4295, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1);
end

if EVENT == 2017 then
	SelectMsg(UID, 3, -1, 201311, NPC, 4288, -1, 4289, -1, 4290, -1, 4291, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1);
end

if EVENT == 2018 then
	SelectMsg(UID, 3, -1, 201311, NPC, 4292, -1, 4293, -1, 4294, -1, 4295, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1);
end

if EVENT == 1997 then
    ItemA = HowmuchItem(UID, 800170000);  --³ë¾Æ
	ItemA = HowmuchItem(UID, 508013318);  --³ë¾Æ
else
	RobItem(UID,800170000)
	RunExchange(UID, 1998);
end

if EVENT == 1998 then
    GiveItem(UID,508013318,1);
	end
